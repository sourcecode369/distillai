/* Base Layer - CSS Variables, Typography, Body, Mobile, Scrollbars, Focus, Selection */

@layer base {
  :root {
    --primary: 79 70 229; /* Indigo-600 */
    --primary-hover: 67 56 202; /* Indigo-700 */
    --background: 249 250 251; /* Gray-50 */
    --foreground: 17 24 39; /* Gray-900 */
    --muted: 243 244 246; /* Gray-100 */
    --muted-foreground: 107 114 128; /* Gray-500 */
    --border: 229 231 235; /* Gray-200 */
    --card: 255 255 255; /* White */
    --card-foreground: 17 24 39; /* Gray-900 */
  }

  /* Dark mode CSS variable overrides */
  .dark {
    --background: 3 7 18; /* Gray-950 */
    --foreground: 243 244 246; /* Gray-100 */
    --muted: 17 24 39; /* Gray-900 */
    --muted-foreground: 107 114 128; /* Gray-500 */
    --border: 31 41 55; /* Gray-800 */
    --card: 17 24 39; /* Gray-900 */
    --card-foreground: 243 244 246; /* Gray-100 */
  }

  /* Reset and prevent white overscroll background */
  html,
  body {
    margin: 0;
    padding: 0;
    height: 100%;
    min-height: 100vh;
    min-height: 100dvh; /* Use dynamic viewport height on mobile */
    width: 100%;
    overflow-x: hidden;
    overscroll-behavior-y: none !important; /* Prevent vertical bounce/overscroll */
    overscroll-behavior-x: none !important; /* Prevent horizontal overscroll */
    -webkit-overflow-scrolling: touch;
    /* Prevent pull-to-refresh and rubber band */
    touch-action: pan-y;
  }

  /* Light mode background */
  html {
    background: linear-gradient(to bottom right, rgb(248, 250, 252), rgba(224, 231, 255, 0.3), rgba(237, 233, 254, 0.2));
    background-attachment: fixed;
    /* Additional overscroll prevention for iOS */
    position: fixed;
    overflow: hidden;
    width: 100%;
    height: 100%;
  }

  /* Dark mode background */
  .dark html {
    background: linear-gradient(to bottom right, rgb(15, 23, 42), rgb(15, 23, 42), rgb(2, 6, 23)) !important;
    background-attachment: fixed;
  }

  body {
    /* Allow body to scroll */
    position: relative;
    overflow-y: auto;
    overflow-x: hidden;
    height: 100%;
    width: 100%;
    background: transparent;
  }

  /* Ensure root container fills viewport */
  #root {
    min-height: 100vh;
    min-height: 100dvh;
    width: 100%;
    display: flex;
    flex-direction: column;
    background: transparent;
  }

  * {
    @apply border-gray-200;
  }

  /* Additional body styling */
  body {
    @apply text-gray-900 dark:text-slate-100 antialiased;
    font-feature-settings: "rlig" 1, "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    letter-spacing: -0.01em;
  }

  /* Typography improvements */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    letter-spacing: -0.02em;
    line-height: 1.2;
  }

  p {
    line-height: 1.7;
    letter-spacing: 0.01em;
  }

  /* Improved button interactions */
  button,
  a[role="button"] {
    @apply transition-all duration-200;
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  button:active,
  a[role="button"]:active {
    transform: scale(0.97);
  }

  /* Mobile touch target improvements */
  @media (max-width: 640px) {
    /* Ensure minimum touch target size on mobile */
    button:not(.no-touch-target),
    a[role="button"]:not(.no-touch-target) {
      min-height: 44px;
      min-width: 44px;
    }

    /* Better spacing on mobile */
    .mobile-spacing {
      padding-left: 1rem;
      padding-right: 1rem;
    }

    /* Prevent text overflow on mobile */
    h1,
    h2,
    h3,
    h4,
    h5,
    h6 {
      word-wrap: break-word;
      overflow-wrap: break-word;
    }

    /* Better line heights on mobile */
    p {
      line-height: 1.75;
    }

    /* Better container padding on mobile */
    .container,
    [class*="max-w-"] {
      padding-left: 1rem;
      padding-right: 1rem;
    }
  }

  /* Touch manipulation utility */
  .touch-manipulation {
    touch-action: manipulation;
    -webkit-tap-highlight-color: transparent;
  }

  /* Smooth scroll behavior */
  html {
    scroll-behavior: smooth;
    scroll-padding-top: 80px;
  }

  /* Better focus indicators */
  *:focus-visible {
    @apply outline-none ring-2 ring-indigo-500/50 ring-offset-2 ring-offset-white dark:ring-offset-slate-900 rounded-lg;
    outline-offset: 2px;
  }

  /* Improved selection */
  ::selection {
    @apply bg-indigo-500/20 text-indigo-900 dark:text-indigo-100;
  }

  ::-moz-selection {
    @apply bg-indigo-500/20 text-indigo-900 dark:text-indigo-100;
  }

  /* Skip to content link */
  .skip-to-content {
    @apply sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-indigo-600 focus:text-white focus:rounded-lg;
  }

  body::before {
    content: "";
    position: fixed;
    top: -10vh; /* Extend beyond viewport */
    left: -10vw;
    right: -10vw;
    bottom: -10vh;
    width: 120vw;
    height: 120vh;
    background-image: radial-gradient(
        at 20% 30%,
        rgba(99, 102, 241, 0.12) 0px,
        transparent 50%
      ),
      radial-gradient(at 80% 70%, rgba(139, 92, 246, 0.12) 0px, transparent 50%),
      radial-gradient(at 50% 50%, rgba(59, 130, 246, 0.08) 0px, transparent 50%),
      radial-gradient(at 10% 80%, rgba(236, 72, 153, 0.06) 0px, transparent 50%);
    pointer-events: none;
    z-index: 0;
    animation: background-shift 20s ease-in-out infinite;
  }

  .dark body::before {
    background-image: radial-gradient(
        at 20% 30%,
        rgba(99, 102, 241, 0.15) 0px,
        transparent 50%
      ),
      radial-gradient(at 80% 70%, rgba(139, 92, 246, 0.15) 0px, transparent 50%),
      radial-gradient(at 50% 50%, rgba(59, 130, 246, 0.1) 0px, transparent 50%),
      radial-gradient(at 10% 80%, rgba(236, 72, 153, 0.08) 0px, transparent 50%);
  }

  /* Page transition styles */
  .page-transition-enter {
    opacity: 0;
    transform: translateY(20px);
  }

  .page-transition-enter-active {
    opacity: 1;
    transform: translateY(0);
    transition: opacity 0.3s ease-out, transform 0.3s ease-out;
  }

  .page-transition-exit {
    opacity: 1;
    transform: translateY(0);
  }

  .page-transition-exit-active {
    opacity: 0;
    transform: translateY(-20px);
    transition: opacity 0.2s ease-in, transform 0.2s ease-in;
  }

  /* Ensure smooth transitions */
  main > div {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-gradient-to-b from-indigo-400 to-violet-500 rounded-full;
    border: 2px solid transparent;
    background-clip: padding-box;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply from-indigo-500 to-violet-600;
  }

  /* Custom scrollbar for sidebar sections */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: transparent;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(
      to bottom,
      rgba(99, 102, 241, 0.3),
      rgba(139, 92, 246, 0.3)
    );
    border-radius: 3px;
    transition: background 0.2s;
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(
      to bottom,
      rgba(99, 102, 241, 0.5),
      rgba(139, 92, 246, 0.5)
    );
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb {
    background: linear-gradient(
      to bottom,
      rgba(99, 102, 241, 0.4),
      rgba(139, 92, 246, 0.4)
    );
  }

  .dark .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(
      to bottom,
      rgba(99, 102, 241, 0.6),
      rgba(139, 92, 246, 0.6)
    );
  }
}


